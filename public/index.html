<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeGenius</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <!-- CodeMirror -->
    <link rel="stylesheet" href="codemirror-5.65.18/lib/codemirror.css">
    <script src="codemirror-5.65.18/lib/codemirror.js"></script>
    <script src="codemirror-5.65.18/mode/python/python.js"></script>
    <script src="codemirror-5.65.18/mode/clike/clike.js"></script>
    <script src="codemirror-5.65.18/addon/edit/closebrackets.js"></script>
    <link rel="stylesheet" href="codemirror-5.65.18/theme/dracula.css">
    <link rel="stylesheet" href="codemirror-5.65.18/theme/material-darker.css">
    <link rel="stylesheet" href="../src/css/index.css">
    <style>
  body {
    background-color: #121212;
    color: white;
    font-family: Arial, sans-serif;
    padding: 10px;
    margin: 0;
}

/* Loader Styles */
#loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #121212;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}



/* Google Fonts */
@import url(https://fonts.googleapis.com/css?family=Anonymous+Pro);

/* Cursor */
.cursor{
    position: relative;
    width: 24em;
    margin: 0 auto;
    border-right: 2px solid rgba(255,255,255,.75);
    font-size: 30px;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    transform: translateY(-50%);    
}
/* Animation */
.typewriter-animation {
  animation: 
    typewriter 5s steps(50) 1s 1 normal both, 
    blinkingCursor 500ms steps(50) infinite normal;
}
@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}
@keyframes blinkingCursor{
  from { border-right-color: rgba(255,255,255,.75); }
  to { border-right-color: transparent; }
}











  






/* Header Styling */
.header {
    background: #1f1f1f;
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 8px;
}

.header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: bold;
    color: #fff;
}

/* Button Styling */
.btn-container {
    display: flex;
    gap: 10px;
}

.explorer-button {
    background-color: #2c3e50;
    color: white;
    font-size: 14px;
    font-weight: bold;
    padding: 7px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.explorer-button:hover {
    background-color: #34495e;
    box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
}

.explorer-button:active {
    background-color: #1c2833;
}

/* Sidebar */
.sidebar {
    width: 260px;
    background: #1f1f1f;
    color: white;
    padding: 12px;
    border-radius: 8px;
    display: none; /* Initially hidden */
}

.sidebar h3 {
    text-align: center;
    font-size: 20px;
    margin-bottom: 10px;
}

.files-list {
    list-style: none;
    padding: 0;
}

.files-list li {
    background: #333c44;
    padding: 8px;
    margin: 5px 0;
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.3s ease;
}

.files-list li:hover {
    background: #44515a;
}

/* Editor & Input/Output Area */
.editor-container {
    display: flex;
    gap: 15px;
    margin-top: 10px;
}

.editor {
    flex-grow: 1;
    background: #282a36;
    border-radius: 8px;
    padding: 10px;
    transition: width 0.3s ease-in-out;
    min-width: 500px;
}

.CodeMirror {
    height: 450px;
}

/* Input & Output */
.io-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 280px;
}

.io-container label {
    font-weight: bold;
}

.io-container textarea {
    width: 100%;
    height: 220px;
    background: #1f1f1f;
    color: white;
    border: 1px solid #444;
    padding: 10px;
    border-radius: 5px;
    resize: none;
}

/* Footer */
.footer {
    background: #1f1f1f;
    color: white;
    text-align: center;
    padding: 10px;
    margin-top: 20px;
    border-radius: 8px;
    font-size: 14px;
}

/* Dark Mode Toggle Switch */
.switch {
    position: relative;
    width: 50px;
    height: 24px;
    display: inline-block;
}

.switch input {
    display: none;
}

.slider {
    width: 60px;
  height: 30px;
  background-color: lightgray;
  border-radius: 20px;
  overflow: hidden;
  display: flex;
  align-items: center;
  border: 4px solid transparent;
  transition: .3s;
  box-shadow: 0 0 10px 0 rgb(0, 0, 0, 0.25) inset;
  cursor: pointer;
}

.slider::before {
    content: '';
  display: block;
  width: 100%;
  height: 100%;
  background-color: #fff;
  transform: translateX(-30px);
  border-radius: 20px;
  transition: .3s;
  box-shadow: 0 0 10px 3px rgb(0, 0, 0, 0.25);
}

.checkbox:checked + .slider {
    background-color: #313033;
}

.checkbox:checked + .slider::before {
    transform: translateX(24px);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .editor-container {
        flex-direction: column;
    }

    .editor {
        width: 100%;
    }

    .io-container {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .btn-container {
        flex-wrap: wrap;
    }

    .editor {
        min-width: auto;
    }

    .sidebar {
        width: 100%;
    }
}



    </style>
</head>

<body>
    <div id="loader">
        <p class="cursor typewriter-animation">Hi there,I am CodeGenius ‚Äì Your AI-powered coding companion.</p>
</div>
        

    </div>
    <div class="main-content">
    <div class="header">
        <img src="logo.png" alt="Logo" width="50" height="50">
        <h3 class="name" style="font-family: Arial, sans-serif; font-size: 36px; font-weight: bold; color: #474646;"><b>CodeGenius</b></h3>
    <div class="btn-container saved">
        <button id="toggleSidebar" class="explorer-button">
            üìÅ Explorer
        </button>
        
        <input type="text" id="filename" value="untitled.cpp" class="form-control">
        <button id="saveBtn" class="explorer-button">üíæ Save</button>
        <input type="file" id="fileInput" style="display: none;">
        <button id="importBtn" class="explorer-button">üì• Import</button>
        <button id="exportBtn" class="explorer-button">üì§ Export</button>
       <!-- From Uiverse.io by TimTrayler --> 
<label class="switch">
    <input type="checkbox" class="checkbox">
    <span class="slider"></span>
  </label>
    </div>
    <div class="btn-container">
        <select class="form-select" id="languageSelect">
            <option value="Cpp">C++</option>
            <option value="Java">Java</option>
            <option value="Python">Python</option>
        </select>
        <button id="runBtn" class="explorer-button"> ‚ñ∂Ô∏è Run</button> 
    </div>
</div>


    <div class="editor-container">
        <div class="sidebar">
            <h3><b>Saved Files</b></h3>
            <ul id="files-list" class="files-list"></ul>
        </div>
        <div class="editor">
            <textarea id="editor" placeholder="Write code here..."></textarea>
        </div>
        <div class="io-container">
            <label for="input">Input:</label>
            <textarea id="input"></textarea>
            <label for="output">Output:</label>
            <textarea id="output" readonly></textarea>
        </div>
    </div>

    <div class="footer">
        ¬© 2025 CodeGenius 
    </div>
    

    <script>
        // Initialize CodeMirror
        var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
            mode: "text/x-c++src",  // Set default mode
            theme: "material-darker",  // Use the correct dark theme
            lineNumbers: true,  // Show line numbers in a separate column
            styleActiveLine: true,  // Highlight the current active line
            autoCloseBrackets: true,  // Auto-close brackets
        });
        editor.setSize("100%", "500px");
    
    
        // Change language mode and update filename extension
        document.getElementById("languageSelect").addEventListener("change", function () {
            let lang = this.value;
            let filenameInput = document.getElementById("filename");
    
            if (lang == "Java") {
                editor.setOption("mode", "text/x-java");
                filenameInput.value = filenameInput.value.replace(/\.\w+$/, ".java");
            } else if (lang == "Python") {
                editor.setOption("mode", "text/x-python");
                filenameInput.value = filenameInput.value.replace(/\.\w+$/, ".py");
            } else {
                editor.setOption("mode", "text/x-c++src");
                filenameInput.value = filenameInput.value.replace(/\.\w+$/, ".cpp");
            }
        });
    
        // Import Code
        document.getElementById("importBtn").addEventListener("click", function () {
            document.getElementById("fileInput").click();
        });
    
        document.getElementById("fileInput").addEventListener("change", function (event) {
            const file = event.target.files[0];
    
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    editor.setValue(e.target.result);
                    document.getElementById("filename").value = file.name;
                };
                reader.readAsText(file);
            }
        });
    
        // Export Code
        document.getElementById("exportBtn").addEventListener("click", function () {
            const fileContent = editor.getValue();
            const fileName = document.getElementById("filename").value.trim() || "untitled.cpp";
    
            const blob = new Blob([fileContent], { type: "text/plain" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = fileName;
    
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
        });
    
        // Run Code (Backend API Call)
        document.getElementById("runBtn").addEventListener("click", async function () {
            let codeData = {
                code: editor.getValue(),
                input: document.getElementById("input").value,
                lang: document.getElementById("languageSelect").value
            };
    
            let response = await fetch("http://localhost:8000/compile", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(codeData)
            });
    
            let data = await response.json();
            document.getElementById("output").value = data.output;
        });
    
        // Load saved files from localStorage on page load
           document.addEventListener("DOMContentLoaded", function () {
           const savedFiles = JSON.parse(localStorage.getItem("savedFiles")) || [];
           const filesList = document.getElementById("files-list");

           savedFiles.forEach(fileName => {
           let listItem = document.createElement("li");
           listItem.textContent = fileName;
           filesList.appendChild(listItem);
        });
});

// Save file to localStorage when "Save" button is clicked
document.getElementById("saveBtn").addEventListener("click", function () {
    let fileName = document.getElementById("filename").value.trim();
    if (!fileName) return;

    const savedFiles = JSON.parse(localStorage.getItem("savedFiles")) || [];
    
    // Avoid duplicates
    if (!savedFiles.includes(fileName)) {
        savedFiles.push(fileName);
        localStorage.setItem("savedFiles", JSON.stringify(savedFiles));

        let listItem = document.createElement("li");
        listItem.textContent = fileName;
        document.getElementById("files-list").appendChild(listItem);
    }
});

//toggle sidebar
document.getElementById("toggleSidebar").addEventListener("click", function () {
        let sidebar = document.querySelector(".sidebar");
        let editor = document.querySelector(".editor");

        if (sidebar.style.display === "none" || sidebar.style.display === "") {
            sidebar.style.display = "block"; // Show sidebar
            editor.style.minWidth = "450px"; // Reduce editor width
        } else {
            sidebar.style.display = "none"; // Hide sidebar
            editor.style.minWidth = "600px"; // Restore editor width
        }
    });


    //theme toggle
    document.addEventListener("DOMContentLoaded", function () {
    const toggleSwitch = document.querySelector(".switch input");

    // Function to apply the theme
    function applyTheme(isLightMode) {
    if (isLightMode) {
        document.body.style.backgroundColor = "#ffffff"; // Light background
        document.body.style.color = "#000000"; // Dark text

        document.querySelector(".header").style.background = "#f0f0f0";
        document.querySelector(".footer").style.background = "#f0f0f0";
        document.querySelector(".footer").style.color = "#000000"; // Footer text black

        document.querySelector(".editor").style.background = "#f8f9fa"; // Light editor
        document.querySelector(".io-container textarea").style.background = "#ffffff";
        document.querySelector(".io-container textarea").style.color = "#000000";

        // Set output box color to match input box
        document.getElementById("output").style.background = "#ffffff";
        document.getElementById("output").style.color = "#000000";

        // Apply theme to sidebar
        document.querySelector(".sidebar").style.background = "#f0f0f0";
        document.querySelector(".sidebar").style.color = "#000000";

    } else {
        document.body.style.backgroundColor = "#121212"; // Dark background
        document.body.style.color = "white";

        document.querySelector(".header").style.background = "#1f1f1f";
        document.querySelector(".footer").style.background = "#1f1f1f";
        document.querySelector(".footer").style.color = "white"; // Footer text white

        document.querySelector(".editor").style.background = "#282a36"; // Dark editor
        document.querySelector(".io-container textarea").style.background = "#1f1f1f";
        document.querySelector(".io-container textarea").style.color = "white";

        // Set output box color to match input box
        document.getElementById("output").style.background = "#1f1f1f";
        document.getElementById("output").style.color = "white";

        // Apply theme to sidebar
        document.querySelector(".sidebar").style.background = "#1f1f1f";
        document.querySelector(".sidebar").style.color = "white";
    }

    // Store theme preference in localStorage
    localStorage.setItem("theme", isLightMode ? "light" : "dark");
}

    

    // Event listener for toggle switch
    toggleSwitch.addEventListener("change", function () {
        applyTheme(this.checked);
    });

    // Load theme from localStorage on page load
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "light") {
        toggleSwitch.checked = true;
        applyTheme(true);
    }
});


    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(() => {
                document.getElementById("loader").style.display = "none";
                document.querySelector(".main-content").style.display = "block";
            }, 4500);
        });
    </script>
    
    
    
    <script src='https://cdn.jotfor.ms/s/umd/latest/for-embedded-agent.js'></script>
    <script>
      window.addEventListener("DOMContentLoaded", function() {
        window.AgentInitializer.init({
          agentRenderURL: "https://agent.jotform.com/01953c88b4b47687850aea296274c3ac3939",
          rootId: "JotformAgent-01953c88b4b47687850aea296274c3ac3939",
          formID: "01953c88b4b47687850aea296274c3ac3939",
          queryParams: ["skipWelcome=1", "maximizable=1"],
          domain: "https://www.jotform.com",
          isDraggable: false,
          background: "linear-gradient(180deg, #424757 0%, #424757 100%)",
          buttonBackgroundColor: "#11111B",
          buttonIconColor: "#FFF",
          variant: false,
          customizations: {
            "greeting": "Yes",
            "greetingMessage": "Hi! How can I assist you?",
            "pulse": "Yes",
            "position": "right"
          },
          isVoice: undefined
        });
      });
    </script>  
</body>

</html>
